<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome DBMS60</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Firebase v3 API -->
    <script src="https://www.gstatic.com/firebasejs/3.5.1/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "PuZYC0iRtZEKP1BRgCfNVxhz88i4vMpDs7Sert58", 
        authDomain: "dbms60.firebaseio.com",    
        databaseURL: "https://dbms60.firebaseio.com"};
      
      firebase.initializeApp(config);
      window.addEventListener('load', function()
      {
         // set up query to receive callbacks when new sensor readings are posted
        firebase.database().ref('DHT22').on('value', function(data) 
            {
                  var sensor = data.val();  // retrieve new sensor readings
          
          // create the HTML to display new readings and update the page
          document.getElementById('tempdata').innerHTML=
            "<p class='boxed'><em> Temp: "     + sensor.temp + " &deg;C</em></p>" +
            "<p class='boxed'><em> Humi: "     + sensor.humi + " %</em></p>" +      
            "<p class='boxed'><em> Brightness: "     + sensor.bring 
          mydata.setValue(0, 1, sensor.humi); // update gauge data with latest humi reading
          chart.draw(mydata, myoptions);      // re-draw gauge
          mydata1.setValue(0, 1, sensor.temp); // update gauge data with latest temp reading
          chart1.draw(mydata1, myoptions1);      // re-draw gaug 
          mydata2.setValue(0, 1, sensor.bring); // update gauge data with latest bring reading
          chart2.draw(mydata2, myoptions2);      // re-draw gaug   
        });     
    }); // load event
    </script> 
    
    <!-- Gauge style chart -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      // Following creates the temperature gauge
      google.charts.load('current', {'packages':['gauge']});
      google.charts.setOnLoadCallback(drawChart);
      function drawChart() 
      {
        mydata = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Humi' , 0]
          ]);

        myoptions = {
          width: 300, height: 300,
                  redColor: '#ff471a',
          redFrom: 90, redTo: 120,
                  yellowColor: '#ffff33',
          yellowFrom:70, yellowTo: 90,
                  greenColor: '#99e6ff',
                  greenFrom: -10, greenTo: 0,
                  max: 120,
                  min: -10,                                
                minorTicks: 5,
          majorTicks: ['-10','0','20','','40','','60','','80','','100','','120']};

        chart = new google.visualization.Gauge(document.getElementById('chart_div'));
        chart.draw(mydata, myoptions);

      }
      google.charts.setOnLoadCallback(drawChart1);
        function drawChart1() 
      {
        mydata1 = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Temp' , 0]
          ]);

        myoptions1 = {
          width: 300, height: 300,
                  redColor: '#ff471a',
          redFrom: 40, redTo: 55,
                  yellowColor: '#ffff33',
          yellowFrom:30, yellowTo: 40,
                  greenColor: '#99e6ff',
                  greenFrom: -10, greenTo: 0,
                  max: 50,
                  min: -10,
                  minorTicks: 5,

          majorTicks: ['-10','-5','0','','10','','20','','30','','40','','50']};

        chart1 = new google.visualization.Gauge(document.getElementById('chart_div1'));
        chart1.draw(mydata1, myoptions1);
 }
        google.charts.setOnLoadCallback(drawChart2);
        function drawChart2() 
      {
        mydata2 = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Bring' , 0]
          ]);

        myoptions2 = {
          width: 300, height: 300,
                  redColor: '#ff471a',
          redFrom: 850, redTo: 1000,
                  yellowColor: '#ffff33',
          yellowFrom:650, yellowTo: 850,
                  greenColor: '#99e6ff',
                  greenFrom: 0, greenTo: 150,
                  max: 1000,
                  min: 0,
                  minorTicks: 5,
          majorTicks: ['0','50','150','','250','','450','','650','','850','','1000']};

        chart2 = new google.visualization.Gauge(document.getElementById('chart_div2'));
        chart2.draw(mydata2, myoptions2);

      }
    </script>  
  </head>
  <body>
    <div class="page_content">
 <header>
        <h1>Display</h1>
      </header>
        <div id="tempdata">
                <p class="boxed"><em> Humi: 0 &deg;C </em></p>
                <p class="boxed"><em> Temp: 0 &deg;C </em></p>
                <p class="boxed"><em> Bring: 0
        </div>
                <div id="chart_con">
                <div id="chart_div1">
          </div>
          </div>
                <div id="chart_con">    
                <div id="chart_div">      
          </div>
          </div>
                <div id="chart_con">   
                <div id="chart_div2"> 
        </div>
        </div>
    </div>
</body>
</html>              
                                 
